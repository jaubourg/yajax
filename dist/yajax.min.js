/*
 YajaX v.0.1(a) [01/27/10 21:20:52.366 - CET]
 Copyright 2010, Julian Aubourg
 Dual licensed under the MIT and GPL Version 2 licenses
*/
(function(j){function i(a){var b,d,c;d=k.call(a);if(d==="[object String]")a='"'+a.replace(n,'\\"')+'"';else if(d==="[object Array]"){c=[];b=0;for(d=a.length;b<d;b++)c.push(i(a[b]));a="["+c.join(",")+"]"}else if(d==="[object Object]"){c=[];for(b in a)c.push(i(b)+":"+i(a[b]));a="{"+c.join(",")+"}"}else a=""+a;return a}function o(a){var b=[],d=j.createElement("script"),c,f,e,g;c=0;for(f=a.length;c<f;c++){e=a[c];g={url:e.url};if(e.headers)g.headers=e.headers;if(e.type&&!/^GET$/i.test(e.type))g.type=e.type.toUpperCase();
b.push(i(g).replace(/'/g,"\\'"))}b="use'http://github.com/jaubourg/yajax/raw/master/db/yajax.xml'as t;select*from t where options in('"+b.join("','")+"')";l[b]={script:d,options:a};d.type="text/javascript";d.async=true;d.defer=true;d.src="http://query.yahooapis.com/v1/public/yql?diagnostics=false&format=json&callback=yajax&q="+escape(b);p.appendChild(d)}function q(){var a=h.length;h.push.apply(h,arguments);!a&&h.length&&setTimeout(function(){for(;a=h.length;)o(h.splice(0,a<3?a:3))},0)}function r(a){var b,
d,c,f;if((a=a.query)&&(b=unescape(/\?q=(.+)($|&)/.exec(a.uri)[1].replace(/\+/g," ")))&&(d=l[b])&&(a=a.results)&&(a=a.result)){if(k.call(a)!=="[object Array]")a=[a];for(var e=0,g=a.length;e<g;e++){f=a[e];c=d.options[e];if(f&&c){try{f.exception?c.error(f.exception,f):c.success(f.response,f)}catch(s){}try{c.complete(f)}catch(t){}}}delete l[b]}}function m(a){if(a)!a.query&&!a.exception?q.apply(window,arguments):r(a);return m}var p=j.getElementsByTagName("head")[0]||j.documentElement,k={}.toString,h=[],
l={},n=/"/g;k={}.toString;window.yajax=m})(document);
